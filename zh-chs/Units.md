## 单位
任何一个物体，都具有单位，最常见的就是物料，例如啤酒可以按瓶计算，也可以按箱计算，钢材按吨计算，钉子可以按千克计算，当然，如果你愿意也可以按个计算钉子。

还有一些你太注意到的单位，例如货币，美元的单位当然是美元，美分，人民币的单位是元、角和分。

### 计数和计量
现实中的大多数商品是计数方式统计的，例如你可以说`买3个小熊玩具`，这里`3`是数量，`个`是单位，`小熊玩具`是商品。买 `3.2个小熊玩具` 是没有现实意义的。

有些商品是计量方式统计的，例如你可以说：`买3.2斤大米`，这里`3.2`是数量，`斤`是单位，`大米`是商品。

### 多单位
如果你仔细的想，计量方式统计也可以理解为计数，例如3.2斤,可以理解为：`3`斤和`2`两，可以化解为两个整数单位的计数。

这里的斤、两是重量的单位，你可以换算成 `1600克`。即一个物品可以是多单位。

多个单位之间存在换算关系，例如`1斤`=`10两`，常见的计量单位是允许十进制方式换算的，但也的不是，例如`1千克`=`2斤`，毛里塔尼亚的货币单位不是十进制，而是规定1乌吉亚等于5考姆斯。

多个单位之间存在换算关系的，例如克、千克、吨等，我们归为一个群组，成为重量，常见的单位群组包括：长度、重量（公制）、容量等。当然，不同国家可能不同，例如重量有英制重量和美制重量等，不同行业可能也不同，例如金衡盎司、药衡盎司、纺织盎司、常衡盎司等。

todo:时间是单位群组吗？`年`与`天`不一定是365的关系哦。

某些看似多单位的例子，可能不是多单位的关系，例如一箱（件）礼盒装啤酒包含12瓶啤酒，12瓶啤酒还要加一个漂亮的盒子才能算一箱，虽然盒子不能单独计价。况且卖一箱啤酒时，我们扫描条码时是扫描箱子上的条码而不是啤酒瓶上的条码。

### 物品、数量和单位
我认为，单位与物品形影不离，当我们对某个物品进行评价时（定义属性），总是默认包含了他的单位的。比如，我们说， 大米单价时5.0元，其`单价 5.0元`这个属性，并不仅仅是对`大米`的定义，还包含了核算单位：`千克`的语义。即`大米 5.0元/1千克`，如果你仔细想，还可以细化为：`大米 1千克 = 人民币 5.0 元`。

即任何数量，必然表示的是某个物品和他的单位。

### 数据库设计
我将单位设计到Materiel_Main上，而不是Materiel上，这是因为如果不同组织或不同的时间段，其单位发生了改变，那么不同版本之前就没有任何沟通的意义了。比如之前是一斤大米，你现在改成1千克大米，那么以前的单据，还有现在的库存将一片大乱。

```sql
CREATE TABLE [dbo].[Materiel_Main]
(
    [Id] INT NOT NULL PRIMARY KEY, 
    [Caption] NVARCHAR(50) NOT NULL, 
    [Unit_Id] INT NOT NULL 
)
```

单位table我不太建议设计成具有版本功能，因为单位不能按照不同组织或者不同时间段有不同的理解。

单位包含了名称和与主要单位的换算关系。

```sql
CREATE TABLE [dbo].[Units]
(
    [Id] INT NOT NULL PRIMARY KEY,
    [Caption] NVARCHAR(50) NOT NULL,
    [Units_Group_Id] INT NOT NULL,
    [ThisQua] INT NOT NULL DEFAULT 1,
    [MainQua] INT NOT NULL, 
    [Precision] TINYINT NOT NULL DEFAULT 0
)
```

在这个表中，换算关系通过两个因子完成，假设`千克`是你的主要单位，那么`两`与他的换算关系就是： 200 `两` = 1 `千克`，而`吨`与他的换算关系是：1000 `千克` = 1 `吨`。即定义一个分子和分母的换算关系。 

另外，还包含精度的定义，即允许数量的进度到小数第几位，计数方式的单位不能输入小数，即精度为0，而人民币元，精度为2位。

下面是单位组的设计，包含了名称和主要单位：

```sql
CREATE TABLE [dbo].[Units_Group]
(
	[Id] INT NOT NULL PRIMARY KEY,
	[Caption] NVARCHAR(50) NOT NULL,
	Main_Id INT
)
```